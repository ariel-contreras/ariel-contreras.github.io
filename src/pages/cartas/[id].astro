---
import type { GetStaticPaths } from "astro";
import Layout from "../../layouts/Layout.astro";
import { getCollection,render } from "astro:content";
export async function getStaticPaths() {
  const cartas = await getCollection('cartas');
  return cartas.map((carta)=>({
    params: {id: carta.id},
    props: {carta}
  }))
}

const {carta} = Astro.props
const {data} = carta
const {saludo,resumen,subtitulo,firma,cargo,inicial,footer} = data
const {Content} = await render(carta) 
---


<Layout>
  <article class="letter">
    <header>
      <div class="portrait">
        <!-- ReemplazÃ¡ la imagen por el retrato deseado -->
        <img src="retrato.jpg" alt="Retrato de la Princesa" />
      </div>
      <h1>{saludo}</h1>
      <p>{subtitulo}</p>
    </header>

    <section class="content">
      <Content/>
    </section>

    <div class="signature">
      <div class="name">{firma}</div>
      <div class="title">{cargo}</div>
    </div>

    <footer>
      {footer}
    </footer>

    <div class="seal">{inicial}</div>
  </article>
</Layout>


<style>
  body {
    margin: 0;
    min-height: 100vh;
    background: radial-gradient(circle at top, #2b1d1a, #120b0a);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-family: 'Playfair Display', serif;
    color: var(--ink);
  }

  .letter {
    background: var(--paper);
    width: min(90%, 720px);
    padding: 3.5rem 3rem;
    box-shadow:
      0 0 0 2px rgba(183,155,91,0.3),
      0 25px 60px rgba(0,0,0,0.6);
    position: relative;
  }

  .letter::before {
    content: "";
    position: absolute;
    inset: 10px;
    border: 1px solid rgba(183,155,91,0.35);
    pointer-events: none;
  }

  .seal {
    position: absolute;
    bottom: -28px;
    right: 40px;
    width: 70px;
    height: 70px;
    background: radial-gradient(circle at top left, #d8b76a, #8f6b2a);
    border-radius: 50%;
    box-shadow: 0 8px 20px rgba(0,0,0,0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Great Vibes', cursive;
    font-size: 2.2rem;
    color: #3b2a10;
  }

  header {
    text-align: center;
    margin-bottom: 2.5rem;
  }

  .portrait {
    width: 150px;
    height: 200px;
    margin: 0 auto 1.8rem auto;
    padding: 8px;
    border: 3px solid rgba(183,155,91,0.7);
    background: linear-gradient(135deg, #e6d8b8, #f6f0dc);
    border-radius: 50% / 60%;
    box-shadow: 0 12px 30px rgba(0,0,0,0.45);
  }

  .portrait img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    border-radius: 50% / 60%;
    filter: sepia(20%) contrast(1.08);
  }

  header h1 {
    font-family: 'Great Vibes', cursive;
    font-size: 3.2rem;
    margin: 0;
    color: #4a2e2e;
  }

  header p {
    margin-top: 0.5rem;
    font-style: italic;
    color: #6a4a4a;
  }

  .content {
    font-size: 1.1rem;
    line-height: 1.9;
    text-align: justify;
  }

  .content p:first-letter {
    float: left;
    font-size: 3.2rem;
    line-height: 1;
    padding-right: 0.4rem;
    font-family: 'Great Vibes', cursive;
    color: #5a2f2f;
  }

  .signature {
    margin-top: 3rem;
    text-align: right;
  }

  .signature .name {
    font-family: 'Great Vibes', cursive;
    font-size: 2.6rem;
    color: #4a2e2e;
  }

  .signature .title {
    font-size: 0.95rem;
    font-style: italic;
    color: #6a4a4a;
  }

  footer {
    margin-top: 2rem;
    text-align: center;
    font-size: 0.8rem;
    color: #7a6666;
  }
</style>